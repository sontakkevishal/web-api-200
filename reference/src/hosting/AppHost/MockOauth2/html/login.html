<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>Mock OAuth2 Server Example Sign-in</title>

    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" rel="stylesheet">
</head>

<body style="background-color: #283B53">
<div class="container text-center">
    <div class="row align-items-start" style="color: #C4C263">

  
        <div class="col" >
            <form method="post">
                
 
                <hr class="divisor">
                <div class="row">
                    <div class="col" id="examples"></div>
                    <div class="col items-start text-left">
                        <div class="form-group">
                            <input autofocus="on" class="form-control font-mono" name="username"
                                   placeholder="Enter any user/subject"
                                   type="text">
                        </div>

                        <div class="form-group">
                        <textarea class="form-control" name="claims" placeholder="Optional claims JSON value, example:
{
  &quot;acr&quot;: &quot;reference&quot;
}" rows="15"
                        ></textarea>
                        </div>
                <button class="btn btn-primary topBtn mt-4 w-full" type="submit"><i class="fa fa-sign-in"></i>Sign-in</button>
                    </div>
                </div>
            </form>

        </div>
        <div class="col">
            <h1 class="color: #C4C263">FAKE LOGIN</h1>
            <img src="https://hypertheory.nyc3.digitaloceanspaces.com/assets/ht-logo.png" width="280" alt="hypertheory logo" />
            <div class="align-items-start text-left">
              
                <h2 style="">Mock OAuth2 Server Sign-in</h2>
                <p>This is using OIDC/OAuth2 - but it will allow you, for development and testing, to use any users with
                    any claims.</p>
            </div>
        </div>


    </div>
</div>
<script>
    const form = document.querySelector('form');
    const userNameEntry = form.querySelector('input[name="username"]');
    const claimsEntry = form.querySelector('textarea[name="claims"]');
    const examplesElement = document.getElementById('examples');
    form.addEventListener('submit', function (event) {
        if (claimsEntry.value) {
            try {
                JSON.parse(claimsEntry.value);
            } catch (e) {
                event.preventDefault();
                alert('Claims value is not valid JSON: ' + e.message);
            }
        }
    })
    const examples = [
        {
            description: 'Example 1 - Alice, just an employee',
            data: {
                username: 'Alice',
                claims: `{}`
            }
        },
       
        {
            description: 'Example 2 - Mary, Works In Software Center',
            data: {
                username: 'Mary',
                claims: `{
    "role": ["SoftwareCenter"]
 }`
            }
        },
        {
            description: 'Example 3 - Sue, Works In Software Center, is a Manager',
            data: {
                username: 'Sue',
                claims: `{
    "role": ["SoftwareCenter", "Manager"]
 }`
            }
        }
    ]
    examples.forEach(example => {
        const btn = document.createElement('button');
        btn.className = 'btn btn-success btn-md my-3';
        btn.textContent = example.description;
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            userNameEntry.value = example.data.username;
            claimsEntry.value = JSON.parse(example.data.claims) ? example.data.claims : '';
        });
        examplesElement.appendChild(btn);
        examplesElement.appendChild(document.createElement('br'));
    })
</script>
</body>

</html>